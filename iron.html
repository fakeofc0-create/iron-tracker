<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ironing Tracker</title>
    
    <!-- Using a simple modern font and Font Awesome icons (only external links needed) -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        :root {
            --primary: #1e40af; /* Blue-800 */
            --primary-light: #60a5fa; /* Blue-400 */
            --background: #f3f4f6; /* Gray-100 */
            --card-bg: #ffffff;
            --success: #10b981;
            --danger: #ef4444;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background-color: var(--background);
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
        }

        .container {
            width: 100%;
            max-width: 420px; /* Mobile width */
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            background-color: var(--card-bg);
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.05);
        }

        header {
            background-color: var(--primary);
            color: white;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header-logo {
            background-color: rgba(255, 255, 255, 0.2);
            width: 45px;
            height: 45px;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 50%;
            font-size: 1.5rem;
        }

        /* --- Section Styling --- */
        .section-box {
            background-color: var(--card-bg);
            padding: 15px;
            border-radius: 12px;
            margin-bottom: 15px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
        }
        
        .title {
            font-size: 0.8rem;
            font-weight: 700;
            color: #6b7280; /* Gray-500 */
            text-transform: uppercase;
            margin-bottom: 10px;
        }

        /* --- Input Form --- */
        .input-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 15px;
        }

        input[type="date"], input[type="number"], .custom-select {
            width: 100%;
            padding: 12px;
            border: 1px solid #d1d5db;
            border-radius: 8px;
            font-size: 1rem;
            background-color: #f9fafb; /* Gray-50 */
            box-sizing: border-box;
            font-weight: 500;
        }

        .input-label {
            font-size: 0.75rem;
            font-weight: 500;
            color: #4b5563; /* Gray-600 */
            margin-bottom: 4px;
        }

        .btn-submit {
            width: 100%;
            padding: 14px;
            background-color: var(--primary);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.2rem;
            font-weight: 700;
            cursor: pointer;
            transition: background-color 0.2s, transform 0.1s;
        }

        .btn-submit:hover:not(:disabled) {
            background-color: #1d4ed8; /* Blue-700 */
        }
        .btn-submit:disabled {
            background-color: #9ca3af; /* Gray-400 */
            cursor: not-allowed;
        }

        .status-message {
            padding: 8px;
            border-radius: 8px;
            font-size: 0.9rem;
            margin-top: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .error-msg {
            background-color: #fee2e2; /* Red-100 */
            color: var(--danger);
        }
        .success-msg {
            background-color: #d1fae5; /* Green-100 */
            color: var(--success);
            animation: pulse-green 1.5s infinite;
        }

        @keyframes pulse-green {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        /* --- Summary Card --- */
        .summary-card {
            border-left: 5px solid var(--primary-light);
            padding: 20px;
            margin-top: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: #e0f2fe; /* Blue-50 */
        }
        .summary-card h3 {
            font-size: 0.9rem;
            color: #6b7280;
            text-transform: uppercase;
            margin: 0;
        }
        .summary-card p {
            font-size: 3rem;
            font-weight: 900;
            color: var(--primary);
            margin: 5px 0 0 0;
        }

        /* --- History List --- */
        .history-list {
            padding-bottom: 20px; /* Space for the last item */
        }

        .history-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 15px;
            margin-bottom: 8px;
            border-radius: 10px;
            background-color: var(--card-bg);
            border: 1px solid #e5e7eb;
        }

        .history-date-circle {
            background-color: #eff6ff; /* Blue-50 */
            color: var(--primary);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            font-weight: 700;
            font-size: 1rem;
            margin-right: 12px;
        }
        .history-details {
            flex-grow: 1;
        }
        .history-amount {
            font-weight: 700;
            font-size: 1.2rem;
            color: #1f2937; /* Gray-800 */
        }
        .history-day {
            font-size: 0.75rem;
            color: #9ca3af; /* Gray-400 */
        }

        .btn-delete {
            background: none;
            border: none;
            color: #d1d5db; /* Gray-300 */
            font-size: 1.1rem;
            cursor: pointer;
            transition: color 0.2s;
        }
        .btn-delete:hover {
            color: var(--danger);
        }

        /* --- Delete Confirmation Modal --- */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        .modal-content {
            background-color: white;
            padding: 25px;
            border-radius: 15px;
            max-width: 300px;
            text-align: center;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }
        .modal-buttons {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }
        .btn-confirm {
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: 700;
            cursor: pointer;
        }
        .btn-yes {
            background-color: var(--danger);
            color: white;
        }
        .btn-no {
            background-color: #e5e7eb;
            color: #4b5563;
        }
    </style>
</head>
<body>
    <div class="container">
        
        <header>
            <div class="header-content">
                <h1>Ironing Tracker</h1>
                <div class="header-logo">
                    <i class="fas fa-tshirt"></i>
                </div>
            </div>
        </header>

        <main style="padding: 15px; flex-grow: 1;">
            
            <!-- 2. Record New Expense Section -->
            <div class="section-box" id="record-expense">
                <div class="title">Record New Expense</div>
                <form id="record-form">
                    <div class="input-group">
                        <div>
                            <div class="input-label">Date</div>
                            <input id="entry-date" type="date" required>
                        </div>
                        <div style="position: relative;">
                            <div class="input-label">Amount (₹)</div>
                            <input id="entry-amount" type="number" placeholder="0" required style="padding-left: 30px;">
                            <span style="position: absolute; left: 10px; bottom: 12px; font-weight: 700; color: #9ca3af;">₹</span>
                        </div>
                    </div>
                    <button type="submit" class="btn-submit" id="save-button">Enter Record</button>
                    <div id="status-message-container" style="height: 35px;"></div>
                </form>
            </div>

            <!-- 3. Monthly View / Filter -->
            <div class="section-box">
                <div class="title" style="margin-bottom: 5px;">Monthly View:</div>
                <select id="month-select" class="custom-select" style="margin-bottom: 15px;"></select>
                
                <!-- Monthly Total Card -->
                <div class="summary-card">
                    <div>
                        <h3>Total to Pay for <span id="current-month-name"></span></h3>
                        <p>₹<span id="monthly-total">0</span></p>
                    </div>
                    <div style="text-align: right;">
                        <i class="fas fa-coins" style="font-size: 2rem; color: #f59e0b;"></i>
                        <div style="font-size: 0.75rem; color: #6b7280; margin-top: 5px;"><span id="entry-count">0</span> Entries</div>
                    </div>
                </div>
            </div>

            <!-- 4. History List -->
            <div class="section-box" style="padding-bottom: 5px;">
                <div class="title">Day-wise History</div>
                <div class="history-list" id="history-list">
                    <!-- History items will be injected here -->
                </div>
                <div id="empty-history" style="text-align: center; color: #9ca3af; padding: 30px;">
                    <i class="fas fa-clipboard-list" style="font-size: 2rem; margin-bottom: 10px;"></i>
                    <p>No entries for this month.</p>
                </div>
            </div>
        </main>
    </div>

    <!-- Delete Confirmation Modal (Hidden by default) -->
    <div id="delete-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <p style="font-weight: 700; font-size: 1.1rem; color: #1f2937;">Confirm Deletion</p>
            <p style="font-size: 0.9rem; color: #6b7280; margin-top: 10px;">Are you sure you want to delete this record?</p>
            <div class="modal-buttons">
                <button class="btn-confirm btn-yes" id="confirm-delete">Yes</button>
                <button class="btn-confirm btn-no" id="cancel-delete">No</button>
            </div>
        </div>
    </div>

    <script>
        // --- VANILLA JAVASCRIPT APPLICATION LOGIC ---

        const STORAGE_KEY = 'ironingTrackerLogs';
        let logs = [];
        let deleteCandidateId = null;

        // --- DOM Elements ---
        const form = document.getElementById('record-form');
        const entryDateInput = document.getElementById('entry-date');
        const entryAmountInput = document.getElementById('entry-amount');
        const monthSelect = document.getElementById('month-select');
        const historyList = document.getElementById('history-list');
        const monthlyTotalEl = document.getElementById('monthly-total');
        const currentMonthNameEl = document.getElementById('current-month-name');
        const entryCountEl = document.getElementById('entry-count');
        const emptyHistoryEl = document.getElementById('empty-history');
        const statusContainer = document.getElementById('status-message-container');
        const deleteModal = document.getElementById('delete-modal');
        const confirmDeleteBtn = document.getElementById('confirm-delete');
        const cancelDeleteBtn = document.getElementById('cancel-delete');
        const today = new Date();
        const currentMonth = today.getMonth();
        const currentYear = today.getFullYear();

        // --- Utility Functions ---

        function getTodayDateString() {
            const d = new Date();
            const year = d.getFullYear();
            const month = String(d.getMonth() + 1).padStart(2, '0');
            const day = String(d.getDate()).padStart(2, '0');
            return `${year}-${month}-${day}`;
        }

        function loadLogs() {
            const json = localStorage.getItem(STORAGE_KEY);
            logs = json ? JSON.parse(json) : [];
            // Convert date strings back to numbers for proper filtering
            logs.forEach(log => {
                log.date = new Date(log.date);
            });
        }

        function saveLogs() {
            // Convert date objects to strings for local storage persistence
            const logsToSave = logs.map(log => ({
                id: log.id,
                amount: log.amount,
                date: log.date.toISOString(),
                month: log.month,
                year: log.year
            }));
            localStorage.setItem(STORAGE_KEY, JSON.stringify(logsToSave));
        }

        function displayMessage(type, message) {
            statusContainer.innerHTML = '';
            const msgEl = document.createElement('div');
            msgEl.className = `status-message ${type === 'success' ? 'success-msg' : 'error-msg'}`;
            msgEl.innerHTML = `<i class="fas fa-${type === 'success' ? 'check-circle' : 'exclamation-triangle'}"></i> ${message}`;
            statusContainer.appendChild(msgEl);

            if (type === 'success') {
                setTimeout(() => {
                    msgEl.style.opacity = '0';
                    setTimeout(() => { statusContainer.innerHTML = ''; }, 500);
                }, 2000);
            }
        }

        // --- Rendering and Filtering ---

        function renderMonthSelect() {
            monthSelect.innerHTML = '';
            const monthNames = Array.from({ length: 12 }, (_, i) => 
                new Date(currentYear, i, 1).toLocaleString('default', { month: 'long' })
            );

            monthNames.forEach((name, index) => {
                const option = document.createElement('option');
                option.value = index;
                option.textContent = `${name} ${currentYear}`;
                if (index === currentMonth) {
                    option.selected = true;
                }
                monthSelect.appendChild(option);
            });
            monthSelect.value = currentMonth;
            monthSelect.addEventListener('change', renderFilteredLogs);
        }

        function renderFilteredLogs() {
            const selectedMonth = parseInt(monthSelect.value);
            const selectedYear = currentYear; // Assuming current year for simplicity

            const filteredLogs = logs.filter(log => {
                return log.month === selectedMonth && log.year === selectedYear;
            });
            
            // Sort by date descending
            filteredLogs.sort((a, b) => b.date - a.date);

            // Calculate Totals
            const total = filteredLogs.reduce((sum, log) => sum + log.amount, 0);
            const monthName = new Date(selectedYear, selectedMonth, 1).toLocaleString('default', { month: 'long' });

            monthlyTotalEl.textContent = total.toFixed(0);
            currentMonthNameEl.textContent = monthName;
            entryCountEl.textContent = filteredLogs.length;

            historyList.innerHTML = '';
            
            if (filteredLogs.length === 0) {
                emptyHistoryEl.style.display = 'block';
                return;
            }
            emptyHistoryEl.style.display = 'none';

            filteredLogs.forEach(log => {
                const dateObj = new Date(log.date);
                const item = document.createElement('div');
                item.className = 'history-item';
                item.innerHTML = `
                    <div style="display: flex; align-items: center;">
                        <div class="history-date-circle">${dateObj.getDate()}</div>
                        <div class="history-details">
                            <div class="history-amount">₹${log.amount}</div>
                            <div class="history-day">${dateObj.toLocaleDateString('default', { weekday: 'long' })}</div>
                        </div>
                    </div>
                    <button class="btn-delete" data-id="${log.id}">
                        <i class="fas fa-trash-alt"></i>
                    </button>
                `;
                historyList.appendChild(item);
            });

            // Add event listeners for delete buttons
            historyList.querySelectorAll('.btn-delete').forEach(button => {
                button.addEventListener('click', (e) => {
                    deleteCandidateId = e.currentTarget.dataset.id;
                    deleteModal.style.display = 'flex';
                });
            });
        }

        // --- Event Handlers ---

        function handleRecordFormSubmit(e) {
            e.preventDefault();
            const amount = parseFloat(entryAmountInput.value);
            const dateString = entryDateInput.value;

            if (isNaN(amount) || amount <= 0) {
                displayMessage('error', 'Please enter a valid amount.');
                return;
            }

            const date = new Date(dateString);
            date.setHours(12, 0, 0, 0); // Normalize time to prevent timezone issues

            const newLog = {
                id: Date.now().toString(), // Simple unique ID
                amount: amount,
                date: date,
                month: date.getMonth(),
                year: date.getFullYear()
            };

            logs.unshift(newLog);
            saveLogs();
            
            // Reset form and show success
            entryAmountInput.value = '';
            entryDateInput.value = getTodayDateString();
            displayMessage('success', `Value entered for ${date.toLocaleDateString()}.`);

            // If entry month matches selected month, re-render
            if (date.getMonth() === parseInt(monthSelect.value)) {
                 renderFilteredLogs();
            }
        }

        function handleConfirmDelete() {
            if (deleteCandidateId) {
                logs = logs.filter(log => log.id !== deleteCandidateId);
                saveLogs();
                deleteCandidateId = null;
                deleteModal.style.display = 'none';
                renderFilteredLogs();
            }
        }

        function handleCancelDelete() {
            deleteCandidateId = null;
            deleteModal.style.display = 'none';
        }

        // --- Initialization ---

        function init() {
            // Set default date to today
            entryDateInput.value = getTodayDateString();

            loadLogs();
            renderMonthSelect();
            renderFilteredLogs();
            
            form.addEventListener('submit', handleRecordFormSubmit);
            confirmDeleteBtn.addEventListener('click', handleConfirmDelete);
            cancelDeleteBtn.addEventListener('click', handleCancelDelete);
        }

        init();
    </script>
</body>
</html>